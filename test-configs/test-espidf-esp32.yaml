substitutions:
  device_name: test-espidf-esp32

esphome:
  name: ${device_name}
  name_add_mac_suffix: false

esp32:
  board: esp32dev
  framework:
    type: esp-idf

wifi:
  ssid: "test"
  password: "test12345678"

logger:
  level: INFO

api:
  # Note: Decryption key not supported in ESP-IDF builds
  # encryption:
  #   key: "test_key_32_characters_long=="

ota:
  platform: esphome

uart:
  id: uart_bus
  baud_rate: 115200
  rx_pin: GPIO16
  rx_buffer_size: 1700

external_components:
  - source:
      type: local
      path: ../components
    components: [ dsmr_custom ]
    refresh: 0s

dsmr_custom:
  id: dsmr_hub
  uart_id: uart_bus
  max_telegram_length: 1700
  crc_check: true

text_sensor:
  - platform: dsmr_custom
    dsmr_custom_hub_id: dsmr_hub
    identification:
      name: "P1 Telegram Header"

sensor:
  - platform: uptime
    name: "Uptime"
